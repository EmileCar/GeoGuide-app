@model GeoGuide.ViewModels.CountriesVM

@{
    ViewData["Title"] = "Index";
}

<section class="section--60 section__cardstyle section__centre section__countries">
		<h2 class="title section__countries--title">Search country</h2>
		<!-- <div class="ignoreFlex">
			<div class="map__container">
				<div id="svgMap"></div>
				<script type="module" src="js/mapscript.js"></script>
			</div>
		</div>
		-->
		<p>Look through the list and click on a country to show details</p>
		<form asp-action="IndexWithForm" asp-controller="Country" class="form-searchcountry">
			<!-- HIDDEN FIELDS -->
			<input type="hidden" asp-for="CurrentPage" class="hidden no-display" value="@Model.CurrentPage">
			<input type="checkbox"  id="filtersettings-toggle" class="filtersettings-toggle hidden no-display" @(Model.Filtered ? "checked" : "")>
			
			<!-- ABOVE -->
			<div class="form-searchcountry--above">
				<label class="setting-searchvalue">
					<input type="text" id="search-text" asp-for="Keyword" autofocus name="searchvalue" class="search__inputfield inputfield inherit-font-style" placeholder="Type country...">
					<span class="loader hidden"></span>
				</label>
				<input type="submit" class="search__submitButton button" value="Search">
				<label for="filtersettings-toggle" class="filtersettings-toggle-button button">
					<img src="~/img/settingsIcon.svg" class="settingIcon">
				</label>
			</div>

			<!-- BELOW -->
			<div class="form-searchcountry--filtersettings">
				<label class="setting-sortBy">
						Sort by
						<!-- sort -->
@*						<select id="sortBy" name="sortBy" class="setting-sortBy__inputfield inputfield button">
							<option class="setting-sortBy__option" value="0" <?= empty($_GET["sortBy"]) ? "selected" : "";?>>Name</option>
							<option class="setting-sortBy__option" value="1" <?= !empty($_GET["sortBy"]) && $_GET["sortBy"] == 1 ? "selected" : "";?>>Population</option>
					</select>*@
				</label>
					<label class="setting-region">
							Region
							<!-- region -->
@*							<select name="region" id="region" class="setting-sortBy__inputfield inputfield button">
								<option class="setting-sortBy__option" value="0" <?= empty($_GET["region"]) ? "selected" : "";?>>All</option>
								<?php foreach($regions as $regionitem): ?>
									<option class="setting-sortBy__option" value="<?= $regionitem->id;?>" <?= !empty($_GET["region"]) && $_GET["region"] == $regionitem->id ? "selected" : "";?>><?= $regionitem->name;?></option>
								<?php endforeach;?>
						</select>*@
					</label>
				<label class="setting-independent">
						Non-Independent
						<!-- non-independent -->
						<input type="checkbox" id="nonindependent" name="nonindependent" class="setting-independent inputfield">  
				</label>
				<label class="setting-coverage">
						Without coverage
						<!-- without coverage -->
						<input type="checkbox" id="coverage" name="coverage" class="setting-coverage inputfield">
				</label>																																										
			</div>
		</form>

		<ul class="countries__list">
		@foreach(var country in Model.Countries)
		{
			<a asp-controller="Country" asp-action="Detail" asp-route-id="">
				<li class="country__in_list item__in_list">
					<img src="~/img/flags/@(country.CountryCode).svg" class="country__in_list--flag">
					<p class="country__in_list--title">@(country.Name)</p>
					<p class="country__in_list--desc">@(country.Name)</p>
				</li>
			</a>
		}
		</ul>
		<div class="item__in_list pageInation__in_list">
		@if (Model.CurrentPage > 1)
		{
			<a href="@Url.Action("Index", new { page = Model.CurrentPage - 1 })" class="pageInation__in_list--back"><span class="pageInation__in_list--arrow">Previous</span></a>
		}

		@if(Model.Countries.Count < Model.PageSize && Model.CurrentPage == 1)
		{
			<span class="pageInation__text">
				Showing @Model.Countries.Count countries
			</span>
		}

		@if (Model.CurrentPage < Model.TotalPages)
		{
			<a href="@Url.Action("Index", new { page = Model.CurrentPage + 1 })" class="pageInation__in_list--next"><span class="pageInation__in_list--arrow">Next</span></a>
		}
		</div>
</section>
<script src="js/countries.js"></script>